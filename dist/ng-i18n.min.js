"use strict";var ngI18n=angular.module("ngI18n",[]);ngI18n.provider("I18N",function(){function n(n,r,t){var o=n.lang||"en-us",a={},u="#__locale__#",i="#__name__#",c={},l=this;return l.loaded=[],c.fromFile=function(n){for(var e,r=n.split("\n"),t={},o=0;o<r.length;o++)e=r[o].match(/^(.+?) *?= *?([^\n]+)/),e&&(t[e[1]]=e[2].replace(/^\s+|\s+$/,""));return t},c.toFile=function(n){var e=[];for(var r in n)n.hasOwnProperty(r)&&e.push(r+" = "+n[r]);return e.join("\n")},l.get=function(n){var e=a[o]&&a[o][n]||a["en-us"]&&a["en-us"][n]||n;return e},l.getCurrent=function(){return o},l.getLangs=function(){return e.langs},l.loadLang=function(g){function s(e){e.replace(/\n\n/g,"\n");var r=c.fromFile(e),t=r[u];a[t]=r,l.loaded.push({locale:t,name:r[i]}),o=t,n.lang=t}var f=t.defer();return r.get(e.langsDir+g).success(function(n){n&&!isNaN(n.errorCode)?f.reject(n):(f.resolve(n),s(n))}),f.promise},l.setCurrent=function(n,e){var r=this.loadLang(n),o=t.defer();return r.then(function(n){return o.resolve(n),"function"==typeof e?e():void 0},function(n){o.reject(n),console.error("Failed: "+n)}),o.promise},l.loadLang(o),l}var e={langsDir:"lang/",langs:[{locale:"en-us",name:"English"},{locale:"pt-pt",name:"Portuguese"}]};this.config=function(r){return angular.extend(e,r),["$rootScope","$http","$q",function(r,t,o){return new n(r,t,o).loadLang(e.langs[0].locale)}]},this.$get=["$rootScope","$http","$q",function(e,r,t){return new n(e,r,t)}]}),ngI18n.directive("ngI18n",["I18N",function(n){return{restrict:"E",scope:{key:"@"},link:function(e,r,t){function o(){u=g,c=u.match(/\{[^\}]+?\}/g),angular.forEach(c,function(n){i=n.substring(1,n.length-1),l=t[i],u=u.replace(new RegExp(a(n),"g"),l||"")}),r.html(u)}function a(n){return n.replace(/\{/g,"\\{").replace(/\}/g,"\\}").replace(/\|/g,"\\|")}var u,i,c,l,g=n.get(t.key);e.$watch(o)}}}]),ngI18n.filter("i18n",["I18N",function(n){return function(e,r){return e?n.get(e).replace(/\{[^\}]+?\}/g,r):void 0}}]);