/*
ng-i18n - git@github.com:kevinchappell/ng-i18n.git
Version: 1.1.0
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
angular.module("ngI18n",[]).provider("I18N",function(){"use strict";function n(n,t){function r(n){var e={"{":"\\{","}":"\\}","|":"\\|"};return n.replace(/\{|\}|\|/g,function(n){return e[n]})}var o=this,a={},u=n.lang||sessionStorage.getItem("locale")||"en-us",i="#__locale__#",c="#__name__#",s={};return o.loaded=[],s.fromFile=function(n){for(var e,t=n.split("\n"),r={},o=0;o<t.length;o++)e=t[o].match(/^(.+?) *?= *?([^\n]+)/),e&&(r[e[1]]=e[2].replace(/^\s+|\s+$/,""));return r},s.toFile=function(n){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t+" = "+n[t]);return e.join("\n")},s.processFile=function(e){var t=e.data;t.replace(/\n\n/g,"\n");var r=s.fromFile(t),l=r[i];u=l,a[l]||(a[l]=r,o.loaded.push({locale:l,name:r[c]})),n.lang=l},o.getCurrent=function(){return u},o.getLangs=function(){return e.langs},o.loadLang=function(n){return t.get(e.langsDir+n,{cache:!0}).then(s.processFile)["catch"](function(n){throw console.error(n),n})},o.get=function(n){var e=a[u]&&a[u][n]||a["en-us"]&&a["en-us"][n]||n;return e},o.parseArgs=function(n,e){var t,a,u,i=o.get(n);if("string"==typeof i)return t=i.match(/\{[^\}]+?\}/g),"object"==typeof e?angular.forEach(t,function(n){a=n.substring(1,n.length-1),u=e[a],i=i.replace(new RegExp(r(n),"g"),u||"")}):i=i.replace(/\{[^\}]+?\}/g,e),i},o.setCurrent=function(n,e){var t=this.loadLang(n);t.then(function(t){return window.sessionStorage.setItem("locale",n),"function"==typeof e?e(t):void 0},function(n){console.error("Failed: "+n)})},o.setCurrent(u),"test"===e.env&&(o.utils=s),o}var e={langsDir:"lang/","default":{locale:"en-us",name:"English"},langs:[{locale:"en-us",name:"English"},{locale:"pt-pt",name:"Portuguese"}]};this.config=function(n){return angular.extend(e,n)},this.$get=["$rootScope","$http",function(e,t){return new n(e,t)}]}),angular.module("ngI18n").directive("ngI18n",["I18N",function(n){"use strict";return{restrict:"E",scope:{key:"@"},link:function(e,t,r){function o(){a=n.parseArgs(r.key,r),t.html(a)}var a;e.$watch(o)}}}]),angular.module("ngI18n").filter("i18n",["I18N",function(n){"use strict";var e=function(e,t){return e?n.parseArgs(e,t):void 0};return e.$stateful=!0,e}]);